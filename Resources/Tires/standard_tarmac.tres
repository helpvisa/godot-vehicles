[gd_resource type="Resource" load_steps=2 format=3 uid="uid://dnv2k222voql"]

[sub_resource type="GDScript" id="GDScript_6ohvx"]
script/source = "extends Resource

# public / settable
@export var stiffness: float
@export var longitudinalShape: float
@export var lateralShape: float
@export var peak: float
@export var curvature: float

func _init(p_stiffness = 10.0, p_longitudinalShape = 1.65, p_lateralShape = 1.3, p_peak = 1.0, p_curvature = 0.97):
	stiffness = p_stiffness
	longitudinalShape = p_longitudinalShape
	lateralShape = p_lateralShape
	peak = p_peak
	curvature = p_curvature

func calcForce(weight, slip, lateral: bool = false):
	var localShape = longitudinalShape
	if lateral:
		localShape = lateralShape
	var force = \\
		weight * \\
		peak * \\
		sin(localShape * \\
		atan(stiffness * slip - \\
		curvature * (atan(stiffness * slip))))
	return force
"

[resource]
script = SubResource("GDScript_6ohvx")
stiffness = 10.0
longitudinalShape = 1.0
lateralShape = 1.3
peak = 1.0
curvature = 0.97
